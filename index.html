<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Monster Tree Adventure</title>

<style>
body{
margin:0;
background:linear-gradient(#000000,#0f2027,#203a43);
font-family:Arial;
color:white;
text-align:center;
overflow:hidden;
}

#gameCanvas{
background:radial-gradient(circle,#1b2735,#090a0f);
display:block;
margin:auto;
border:4px solid white;
border-radius:15px;
}

.mobile{
position:fixed;
bottom:10px;
width:100%;
display:flex;
justify-content:center;
gap:10px;
}

.btn{
width:65px;
height:65px;
border-radius:50%;
border:none;
font-size:22px;
background:#ff4081;
color:white;
}

#startScreen{
position:absolute;
width:100%;
height:100%;
background:black;
display:flex;
flex-direction:column;
justify-content:center;
align-items:center;
}

input{
padding:12px;
font-size:18px;
border-radius:10px;
border:none;
margin:10px;
}

button.start{
padding:12px 25px;
font-size:20px;
background:#00c853;
color:white;
border:none;
border-radius:12px;
}
</style>
</head>

<body>

<div id="startScreen">
<h1>ğŸŒ³ Monster Tree Adventure</h1>
<p>Enter your name warrior ğŸ‘§</p>
<input id="playerName" placeholder="Your name">
<button class="start" onclick="startGame()">Start Adventure</button>
</div>

<canvas id="gameCanvas" width="900" height="500"></canvas>

<div class="mobile">
<button class="btn" ontouchstart="move('left')" ontouchend="stop()">â¬…ï¸</button>
<button class="btn" ontouchstart="move('up')" ontouchend="stop()">â¬†ï¸</button>
<button class="btn" ontouchstart="move('down')" ontouchend="stop()">â¬‡ï¸</button>
<button class="btn" ontouchstart="move('right')" ontouchend="stop()">â¡ï¸</button>
<button class="btn" ontouchstart="attack()">ğŸ—¡ï¸</button>
</div>

<audio id="bgm" loop>
<source src="https://cdn.pixabay.com/audio/2022/03/15/audio_c8c8a73467.mp3">
</audio>

<script>
let canvas=document.getElementById("gameCanvas");
let ctx=canvas.getContext("2d");
let name="Hero";

let girl={x:100,y:300,health:100,score:100};
let monster={x:700,y:300,health:100};
let boss={x:750,y:250,health:300};
let tree={x:400,y:260};
let level=1;

let moveDir=null;
let attacking=false;
let showTree=false;

// keyboard
document.addEventListener("keydown",e=>{
if(e.key==="ArrowLeft") moveDir="left";
if(e.key==="ArrowRight") moveDir="right";
if(e.key==="ArrowUp") moveDir="up";
if(e.key==="ArrowDown") moveDir="down";
if(e.key===" ") attacking=true;
});
document.addEventListener("keyup",()=>{moveDir=null;attacking=false});

function move(d){moveDir=d}
function stop(){moveDir=null}
function attack(){attacking=true;setTimeout(()=>attacking=false,300)}

function startGame(){
name=document.getElementById("playerName").value || "Hero";
document.getElementById("startScreen").style.display="none";
document.getElementById("bgm").play();

alert("Welcome "+name+" ğŸ‘§\nMonster Tree will protect you ğŸŒ³\nGood luck!");
}

function drawGirl(){
ctx.fillStyle="#ffe0bd";
ctx.beginPath();
ctx.arc(girl.x,girl.y-25,12,0,Math.PI*2);
ctx.fill();

ctx.fillStyle="pink";
ctx.fillRect(girl.x-12,girl.y-20,24,35);

ctx.fillStyle="white";
for(let i=0;i<6;i++){
ctx.beginPath();
ctx.arc(girl.x-10+Math.random()*20,girl.y-18+Math.random()*30,2,0,Math.PI*2);
ctx.fill();
}

// sword moving
if(attacking){
ctx.strokeStyle="silver";
ctx.lineWidth=5;
ctx.beginPath();
ctx.moveTo(girl.x+15,girl.y-10);
ctx.lineTo(girl.x+45,girl.y-25+Math.random()*20);
ctx.stroke();
}
}

function drawMonster(){
ctx.strokeStyle="white";
ctx.lineWidth=3;
ctx.beginPath();
ctx.arc(monster.x,monster.y-20,14,0,Math.PI*2);
ctx.stroke();

ctx.fillStyle="red";
ctx.beginPath();
ctx.arc(monster.x-5,monster.y-22,3,0,Math.PI*2);
ctx.arc(monster.x+5,monster.y-22,3,0,Math.PI*2);
ctx.fill();

ctx.beginPath();
ctx.moveTo(monster.x,monster.y);
ctx.lineTo(monster.x,monster.y+30);
ctx.moveTo(monster.x-12,monster.y+10);
ctx.lineTo(monster.x+12,monster.y+10);
ctx.stroke();
}

function drawBoss(){
ctx.fillStyle="purple";
ctx.fillRect(boss.x-30,boss.y-30,60,60);
ctx.fillStyle="white";
ctx.fillText("BOSS",boss.x-20,boss.y-40);
}

function drawTree(){
ctx.fillStyle="#3b1f0b";
ctx.fillRect(tree.x,tree.y,30,90);

ctx.fillStyle="red";
ctx.beginPath();
ctx.arc(tree.x+10,tree.y+35,5,0,Math.PI*2);
ctx.arc(tree.x+20,tree.y+35,5,0,Math.PI*2);
ctx.fill();
}

function update(){
if(moveDir==="left") girl.x-=5;
if(moveDir==="right") girl.x+=5;
if(moveDir==="up") girl.y-=5;
if(moveDir==="down") girl.y+=5;

// monster follow
monster.x+=(girl.x-monster.x)*0.02*(level);
monster.y+=(girl.y-monster.y)*0.02*(level);

// attack monster
if(attacking){
if(Math.abs(girl.x-monster.x)<60 && Math.abs(girl.y-monster.y)<60){
monster.health-=3;
}
}

// monster attack
if(Math.abs(girl.x-monster.x)<40 && Math.abs(girl.y-monster.y)<40){
girl.health-=0.3*level;
girl.score-=0.2;
}

// tree help when score low
if(girl.score<50){
showTree=true;
if(Math.abs(girl.x-tree.x)<80){
girl.health+=0.4;
monster.health-=0.5;
}
}

// next level
if(monster.health<=0){
level++;
monster.health=120+level*50;
monster.x=700;
monster.y=Math.random()*400;

alert("Level "+level+" begins!");
}

// boss fight
if(level===5){
drawBoss();
boss.x+=(girl.x-boss.x)*0.01;
boss.y+=(girl.y-boss.y)*0.01;

if(attacking && Math.abs(girl.x-boss.x)<70){
boss.health-=4;
}
if(Math.abs(girl.x-boss.x)<50){
girl.health-=0.5;
}

if(boss.health<=0){
alert("ğŸ† "+name+" saved the world!");
location.reload();
}
}

if(girl.health<=0){
alert("Game Over ğŸ’€");
location.reload();
}
}

function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);

drawGirl();
drawMonster();
if(showTree) drawTree();

ctx.fillStyle="white";
ctx.fillText("Player: "+name,20,20);
ctx.fillText("Score: "+Math.floor(girl.score)+"/100",20,40);
ctx.fillText("Health: "+Math.floor(girl.health),20,60);
ctx.fillText("Level: "+level,20,80);
}

function loop(){
update();
draw();
requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
